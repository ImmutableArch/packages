# Maintainer: Mikołaj Ziółkowski <mikolajziolkowski504@gmail.com>
pkgname=ostree-ext-cli
pkgver=0.15.3
pkgrel=1
pkgdesc="Extended CLI tools for OSTree written in Rust"
arch=('x86_64')
url="https://github.com/ostreedev/ostree-rs-ext"
license=('MIT')
depends=('ostree')
makedepends=('rust' 'cargo' 'git')
source=("git+https://github.com/ostreedev/ostree-rs-ext.git"
        "Cargo.toml")
sha256sums=('SKIP'
            'SKIP')

build() {

    # Kopiujemy plik Cargo.toml (jeśli jest osobno)
    cp "$srcdir/Cargo.toml" "$srcdir/ostree-rs-ext/cli/Cargo.toml"

    cd "$srcdir/ostree-rs-ext/cli"
    cargo build --release --locked
}

package() {
    cd "$srcdir/ostree-rs/ext"
    install -Dm755 target/release/ostree-ext-cli "$pkgdir/usr/bin/ostree-ext-cli"
}
